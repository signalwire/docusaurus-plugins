# Copy Page Content Feature

The plugin includes an optional copy page content feature that integrates with the `@signalwire/docusaurus-theme-llms-txt` theme package to provide a copy button on documentation pages from the docs plugin.

## What It Does

The copy button allows users to:

- Copy the markdown content of the current page
- Share content directly with AI assistants (ChatGPT, Claude)
- Access the original markdown files generated by the plugin

**⚠️ Important**: The copy page content feature requires both the plugin AND the theme package to work.

## Current Scope and Limitations

### Currently Supported

- ✅ Documentation pages from the `@docusaurus/plugin-docs` plugin
- ✅ All doc versions (current and versioned docs)

### Not Yet Supported

- ❌ Blog pages (planned for future release)
- ❌ Custom pages in `src/pages/`

The copy button integration is specifically designed for documentation pages and leverages the docs plugin's routing and metadata structure.

## Installation and Setup

### 1. Install Both Packages

```bash
npm install @signalwire/docusaurus-plugin-llms-txt @signalwire/docusaurus-theme-llms-txt
# or
yarn add @signalwire/docusaurus-plugin-llms-txt @signalwire/docusaurus-theme-llms-txt
```

### 2. Configure Both in docusaurus.config.js

```javascript
module.exports = {
  themes: [
    '@signalwire/docusaurus-theme-llms-txt', // Required for UI
  ],
  plugins: [
    [
      '@signalwire/docusaurus-plugin-llms-txt',
      {
        ui: {
          copyPageContent: true, // Enable the feature
        },
      },
    ],
  ],
};
```

## Configuration Options

### Basic Usage

```javascript
{
  ui: {
    copyPageContent: true  // Enable with defaults
  }
}
```

When enabled with `true`, the button appears with default settings:
- Button label: "Copy Page"
- All copy actions enabled (markdown, ChatGPT, Claude)
- Default AI prompts

### Advanced Configuration

```javascript
{
  ui: {
    copyPageContent: {
      buttonLabel: 'Export',  // Custom button text
      actions: {
        markdown: true,  // Enable markdown copy
        ai: {
          chatGPT: {
            prompt: 'Analyze this documentation:'
          },
          claude: {
            prompt: 'Help me understand:'
          }
        }
      }
    }
  }
}
```

### Configuration Reference

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `buttonLabel` | `string` | `'Copy Page'` | Custom label for the copy button |
| `actions.markdown` | `boolean` | `true` | Enable "Copy as Markdown" option |
| `actions.ai.chatGPT` | `boolean\\|object` | `true` | ChatGPT integration |
| `actions.ai.chatGPT.prompt` | `string` | `'Analyze this documentation:'` | Custom ChatGPT prompt |
| `actions.ai.claude` | `boolean\\|object` | `true` | Claude integration |
| `actions.ai.claude.prompt` | `string` | `'Analyze this documentation:'` | Custom Claude prompt |

### Disable Specific Actions

```javascript
{
  ui: {
    copyPageContent: {
      actions: {
        markdown: true,
        ai: {
          chatGPT: false,  // Disable ChatGPT
          claude: true     // Keep Claude
        }
      }
    }
  }
}
```

### Custom AI Prompts

```javascript
{
  ui: {
    copyPageContent: {
      actions: {
        ai: {
          chatGPT: {
            prompt: 'Please review this documentation and suggest improvements:'
          },
          claude: {
            prompt: 'Summarize the key concepts in this documentation:'
          }
        }
      }
    }
  }
}
```

## How It Works

### Copy as Markdown

When users click "Copy as Markdown":
1. The plugin accesses the processed markdown content for the current page
2. Clean markdown is copied to the clipboard
3. Users can paste into markdown editors, GitHub issues, or documentation tools

### AI Integration

When users click AI options (ChatGPT/Claude):
1. The plugin constructs a URL with the documentation page URL
2. Opens the AI interface in a new tab/window
3. Pre-fills with the custom prompt and page URL
4. AI can then fetch and analyze the page content

### Data Flow

```
Page Content → Plugin Processing → Markdown Generation → Theme UI → User Actions
                     ↓
              Cache/Storage → Copy Button → Clipboard/AI Interface
```

## Theme Integration

The feature integrates with the theme package to provide:

- Seamless visual integration with Docusaurus themes
- Responsive design that works on all screen sizes
- Dropdown menu with multiple action options
- Keyboard accessibility
- Loading states and error handling

### Customization Options

For UI customization, styling options, and component swizzling, see the [theme package documentation](../../../docusaurus-theme-llms-txt/README.md).

The theme provides:
- Extensive CSS variables for customization without swizzling
- Safe swizzling options for individual icons and layout integration
- TypeScript support for custom components

## Troubleshooting

### Copy Button Not Appearing

1. **Verify both packages are installed**:
   ```bash
   npm list @signalwire/docusaurus-plugin-llms-txt @signalwire/docusaurus-theme-llms-txt
   ```

2. **Check configuration**:
   - Plugin must have `ui.copyPageContent` enabled
   - Theme must be included in `themes` array

3. **Clear cache and rebuild**:
   ```bash
   npm run clear
   npm run build
   ```

### Copy Function Not Working

1. **Check browser console** for JavaScript errors
2. **Verify markdown files are generated** (plugin must process content)
3. **Test on different browsers** (clipboard API requires HTTPS in some browsers)

### AI Integration Issues

1. **Popup blocked**: Check browser popup blocker settings
2. **URLs not working**: Verify the page is publicly accessible
3. **Prompt not appearing**: Check custom prompt configuration

## Development Notes

### Requirements

- Plugin version 2.0+ required for copy page content feature
- Theme package must be compatible version
- Docusaurus 2.0+ required

### Performance

- Copy functionality is lightweight and doesn't impact page load
- Markdown content is cached after initial generation
- AI integration uses simple URL construction (no API calls)

### Security

- No sensitive data is transmitted
- AI integration only shares public page URLs
- Copy functionality works entirely client-side

## Future Enhancements

### Planned Features

- **Blog page support**: Extend copy functionality to blog posts
- **Custom page support**: Support for `src/pages/` content
- **Batch operations**: Copy multiple pages or sections
- **Export formats**: PDF, DOCX, or other formats

### Integration Roadmap

- Additional AI platform integrations
- Team collaboration features
- Advanced customization options
- Analytics and usage tracking